\begin{figure}[h]
  \center
\begin{tikzpicture}[->,node distance=1.3cm,>=stealth',bend angle=20,auto,
  place/.style={circle,thick,draw=blue!75,fill=blue!20,minimum size=10mm},
  red place/.style={place,draw=red!75,fill=red!20}
  every label/.style={red},
  every node/.style={scale=.6},
  dots/.style={fill=black,circle,inner sep=2pt},
  triangle/.style={fill=black,regular polygon,regular polygon sides=3,minimum size=10pt,inner sep=0pt,}]

%  \node (rec2) at (0,0) [draw, thick,minimum width=2cm,minimum height=2cm]{$B_{2}$};
%  \node (rec1) [draw, left=of rec2,xshift=2cm,thick,minimum width=2cm,minimum height=2cm,align=center]{$B_{1}$};
%  \node (rec3) [draw, right=of rec2,xshift=-2cm,thick,minimum width=2cm,minimum height=2cm,align=center]{$B_{3}$};
%  \node (rec4) [draw, right=of rec3,xshift=-2cm,thick,minimum width=2cm,minimum height=2cm,align=center]{$B_{4}$};


 % \node [dots] (p1) at ($(rec2.north west)!0.3!(rec2.north east)$) {};
 % \node [dots] (p2) at ($(rec2.north west)!0.7!(rec2.north east)$) {};
 % \node [dots] (q1) at ($(rec1.north west)!0.5!(rec1.north east)$) {};
%  \node [dots] (q2) at ($(rec3.north west)!0.3!(rec3.north east)$) {};
 % \node [dots] (r1) at ($(rec3.north west)!0.7!(rec3.north east)$) {};
 % \node [dots] (r2) at ($(rec4.north west)!0.3!(rec4.north east)$) {};

  

  %\draw [-] (q1) to[ncbar] (p1) node[xshift=-8mm,yshift=1cm]{$\alpha_1$};
  %\draw [-] (q2) to[ncbar=-5mm] (p2) node[xshift=8mm,yshift=1cm]{$\alpha_2$};
  %\draw [-] (r2) to[ncbar=-5mm] (r1) node[xshift=8mm,yshift=1cm]{$\alpha_3$};

  
  \node (interaction) [fill=lbordeau,draw,draw opacity=0,rounded corners=8pt, thick,minimum width=5cm,minimum height=2.25cm,align=center]{\Large{$\gamma=\{\alpha_1, \alpha_2, \alpha_3\}$}};
  \node[right=5mm of interaction] (gears){\includegraphics[scale=.3]{../images/gears.png}};
  \node [inner xsep=2.5cm,inner ysep=1cm,draw=bordeau, fit=(interaction)(gears),label={[shift={(3,-3.5)}]\large{Centralized Engine}}] (sys) {};
  
  
  \only<1>{ \node (rec1) [xshift=-3.5cm,below=8mm of sys,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{1}$};
  \node (rec2) [right=5mm of rec1,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{2}$};
  \node (rec3) [right=5mm of rec2,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{3}$};
  \node (rec4) [right=5mm of rec3,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{4}$};
};
  \only<2>{ \node (rec1) [fill=aqua,xshift=-3.5cm,below=8mm of sys,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{1}$};
  \node (rec2) [fill=aqua,right=5mm of rec1,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{2}$};
  \node (rec3) [right=5mm of rec2,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{3}$};
  \node (rec4) [right=5mm of rec3,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{4}$};
  \node (g1) at (rec1)[xshift=4mm,yshift=4mm]{\includegraphics[scale=0.06]{../images/gears.png}};
  \node (g1) at (rec2)[xshift=4mm,yshift=4mm]{\includegraphics[scale=0.06]{../images/gears.png}};
};
  
  \only<3>{ \node (rec1) [xshift=-3.5cm,below=8mm of sys,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{1}$};
  \node (rec2) [right=5mm of rec1,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{2}$};
  \node (rec3) [right=5mm of rec2,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{3}$};
  \node (rec4) [right=5mm of rec3,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{4}$};
};
  
  \only<4>{ \node (rec1) [xshift=-3.5cm,below=8mm of sys,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{1}$};
  \node (rec2) [right=5mm of rec1,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{2}$};
  \node (rec3) [fill=aqua,right=5mm of rec2,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{3}$};
  \node (rec4) [fill=aqua,right=5mm of rec3,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{4}$};
  \node (g1) at (rec3)[xshift=4mm,yshift=4mm]{\includegraphics[scale=0.06]{../images/gears.png}};
  \node (g1) at (rec4)[xshift=4mm,yshift=4mm]{\includegraphics[scale=0.06]{../images/gears.png}};
};
  \only<5>{ \node (rec1) [xshift=-3.5cm,below=8mm of sys,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{1}$};
  \node (rec2) [right=5mm of rec1,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{2}$};
  \node (rec3) [right=5mm of rec2,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{3}$};
  \node (rec4) [right=5mm of rec3,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{4}$};
};
  \only<6>{ \node (rec1) [fill=aqua,xshift=-3.5cm,below=8mm of sys,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{1}$};
  \node (rec2) [fill=aqua,right=5mm of rec1,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{2}$};
  \node (rec3) [right=5mm of rec2,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{3}$};
  \node (rec4) [right=5mm of rec3,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{4}$};
  \node (g1) at (rec1)[xshift=4mm,yshift=4mm]{\includegraphics[scale=0.06]{../images/gears.png}};
  \node (g1) at (rec2)[xshift=4mm,yshift=4mm]{\includegraphics[scale=0.06]{../images/gears.png}};
};
  \only<7>{ \node (rec1) [fill=aqua,xshift=-3.5cm,below=8mm of sys,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{1}$};
  \node (rec2) [fill=aqua,right=5mm of rec1,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{2}$};
  \node (rec3) [fill=aqua,right=5mm of rec2,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{3}$};
  \node (rec4) [fill=aqua,right=5mm of rec3,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{4}$};
  \node (g1) at (rec1)[xshift=4mm,yshift=4mm]{\includegraphics[scale=0.06]{../images/gears.png}};
  \node (g1) at (rec2)[xshift=4mm,yshift=4mm]{\includegraphics[scale=0.06]{../images/gears.png}};
  \node (g1) at (rec3)[xshift=4mm,yshift=4mm]{\includegraphics[scale=0.06]{../images/gears.png}};
  \node (g1) at (rec4)[xshift=4mm,yshift=4mm]{\includegraphics[scale=0.06]{../images/gears.png}};
};
  \only<8>{ \node (rec1) [fill=aqua,xshift=-3.5cm,below=8mm of sys,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{1}$};
  \node (rec2) [right=5mm of rec1,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{2}$};
  \node (rec3) [right=5mm of rec2,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{3}$};
  \node (rec4) [fill=aqua,right=5mm of rec3,draw, thick,minimum width=1.5cm,minimum height=1.5cm]{$B_{4}$};
  \node (g1) at (rec1)[xshift=4mm,yshift=4mm]{\includegraphics[scale=0.06]{../images/gears.png}};
  \node (g1) at (rec4)[xshift=4mm,yshift=4mm]{\includegraphics[scale=0.06]{../images/gears.png}};
};
  
  \node (p1) at ($(rec1.north west)!0.3!(rec1.north east)$) {};
  \node (p2) at ($(rec1.north west)!0.7!(rec1.north east)$) {};
  \node  (p'1) [above=6mm of p1]{};
  \node  (p'2) [above=6mm of p2]{};
  
  \node (q1) at ($(rec2.north west)!0.3!(rec2.north east)$) {};
  \node (q2) at ($(rec2.north west)!0.7!(rec2.north east)$) {};
  \node  (q'1) [above=6mm of q1]{};
  \node  (q'2) [above=6mm of q2]{};
  
  \node  (t1) at ($(rec3.north west)!0.3!(rec3.north east)$) {};
  \node  (t2) at ($(rec3.north west)!0.7!(rec3.north east)$) {};
  \node  (t'1) [above=6mm of t1]{};
  \node  (t'2) [above=6mm of t2]{};
  
  \node  (r1) at ($(rec4.north west)!0.3!(rec4.north east)$) {};
  \node  (r2) at ($(rec4.north west)!0.7!(rec4.north east)$) {};
  \node  (r'1) [above=6mm of r1]{};
  \node  (r'2) [above=6mm of r2]{};
  
  \draw[->] (p1) -- (p'1);
  \draw[->] (p'2) -- (p2);
  \draw[->] (q1) -- (q'1);
  \draw[->] (q'2) -- (q2);
  \draw[->] (r1) -- (r'1);
  \draw[->] (r'2) -- (r2);
  \draw[->] (t'2) -- (t2);
  \draw[->] (t1) -- (t'1);
  

\end{tikzpicture}
\end{figure}


